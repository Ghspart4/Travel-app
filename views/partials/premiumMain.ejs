    <main>
        <section id="home" class="section active">
            <div class="container">
                <h1>Plan Your Journey With Confidence</h1>
                <p class="words">Your all-in-one travel companion for seamless trip planning, itinerary management, and unforgettable adventures</p>
                <a href="../login.ejs">
                    <button class="botton">Start Planning</button>
                </a>
            </div>
            <div class="container">
                <h4>Smart Itineraries</h4>
                <p class="words">Create detailed travel plans with our intuitive planning tools. Organize flights, accommodations, and activities in one place.</p>
            </div>
            <div class="container">
                <h4>Todo Lists</h4>
                <p class="words">Stay organized with customizable checklists for packing, pre-trip preparations, and daily activities during your journey.</p>
            </div>
            <div class="container">
                <h4>Travel Calendar</h4>
                <p class="words">Visualize your entire trip timeline. Sync events, bookings, and reservations in an easy-to-view calendar format.</p>
            </div>
        </section>

        <section id="todo-lists" class="section" >
            <div class="todo-container">
                <h1 class="todo">Travel Todo List</h1>
                
                <div id="alertContainer" class="alert-container"></div>
        
                <form id="addTodoForm" class="todo-form">
                    <div class="form-group">
                        <label for="task">Task</label>
                        <input type="text" id="task" name="task" required>
                    </div>
        
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status" required>
                            <option value="Pending">Pending</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                        </select>
                    </div>
        
                    <div class="form-group">
                        <label for="due_date">Due Date</label>
                        <input type="date" id="due_date" name="due_date" required>
                    </div>
        
                    <div class="form-group">
                        <label for="priority">Priority</label>
                        <select id="priority" name="priority" required>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
        
                    <button type="submit" class="btn-submit">Add Todo</button>
                </form>
        
        
                    
                
        
                <!-- Modal for editing Todo -->
                <div id="edit-todo-modal" class="modal">
                    <div class="modal-content">
                        <span class="modal-close">&times;</span>
                        <h3>Edit Todo</h3>
                        <form id="edit-todo-form">
                            <input type="hidden" id="edit-todo-id">
                            
                            <div class="form-group">
                                <label for="edit-task">Task</label>
                                <input type="text" id="edit-task" name="task" required>
                            </div>
        
                            <div class="form-group">
                                <label for="edit-due-date">Due Date</label>
                                <input type="date" id="edit-due-date" name="due_date" required>
                            </div>
        
                            <div class="form-group">
                                <label for="edit-priority">Priority</label>
                                <select id="edit-priority" name="priority" required>
                                    <option value="Low">Low</option>
                                    <option value="Medium">Medium</option>
                                    <option value="High">High</option>
                                </select>
                            </div>
        
                            <div class="form-group">
                                <label for="edit-status">Status</label>
                                <select id="edit-status" name="status" required>
                                    <option value="Pending">Pending</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                </select>
                            </div>
        
                            <div class="form-actions">
                                <button type="submit" class="btn-submit">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
        
                <div id="todosContainer" class="todos-grid">
                    <!-- Todos will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <section id="create" class="section">
            <div class="container">
                <h1>Create Your Trip</h1>
                <p>Plan your next adventure with our easy-to-use trip creation tool. Get started by selecting a trip from the dropdown menu or create a new trip.</p>
            <ul class="sub-menu">
                <div>
                    <li>
                        <select id="tripSelector" class="trip-selector">
                            <option value="" disabled selected>Select Trip</option>
                            <% trips.forEach(trip => { %>
                                <option value="<%= trip.id %>"><%= trip.name %></option>
                            <% }); %>
                        </select>
                    </li>
                    <li><button onclick="navigateToTrip()">Go to Trip</button></li>
                    <form id="tripForm">
                        <div class="form-group">
                            <label for="tripName">Trip Name:</label>
                            <input type="text" id="tripName" required>
                        </div>
                        <div class="form-group">
                            <label for="startDate">Start Date:</label>
                            <input type="date" id="startDate" required>
                        </div>
                        <div class="form-group">
                            <label for="endDate">End Date:</label>
                            <input type="date" id="endDate" required>
                        </div>
                        <button type="submit">Create Trip</button>
                    </form>
                </div>
            </ul>
        </li>
        </section>
    
        <section id="profile" class="section">
            <div class="container">
                <div class="profile-details">
                    <h1>Welcome <%= user.fullName %></h1>
                    <p>Email: <%= user.email %></p>
                </div>
            </div>
        </section>
    </main>
    <script type="text/javascript" src="/js/todo.js" defer>
        document.getElementById('tripForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const tripData = {
        name: document.getElementById('tripName').value.trim(),
        start_date: document.getElementById('startDate').value,
        end_date: document.getElementById('endDate').value
    };

    // Client-side validation
    if (!tripData.name || !tripData.start_date || !tripData.end_date) {
        alert('Please fill all required fields');
        return;
    }

    try {
        const response = await fetch('/trips', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(tripData)
        });

        if (response.ok) {
            window.location.reload();
            closeTripModal();
        } else {
            const error = await response.json();
            alert(error.error || 'Failed to create trip');
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Network error');
    }
});
    </script>
